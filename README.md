# Лабораторная работа Placer

## Постановка задачи
По фотографии определить возможность вхождения предметов в многоугольник, не перекрывая друг друга. Предметы и многоугольник, нарисованный на листе А4, находятся на одной фотографии. На фотографии могут оказаться предметы только из заранее известного набора.

## Ввод-вывод
### Ввод
Фотография в формате .jpg на которой присутсвуют
* Один или больше предметов из заданного набора
* Белый лист с нарисованным на нём многоугольником
### Вывод
Ответ, выведенный в стандартный поток
* ___True___, если объекта можно разместить в многоугольнике
* ___False___, если объекты нельзя разместить в многоугольнике

## Требования
### К изображению
* Формат .jpg
* Все фотографии сделаны на одной поверхности, поверхность должна быть однородной
* Все фотографии сделаны сверху, камера удерживается параллельно поверхности
* Все фотографии сделаны в дневном освещении, объекты на фотографии имеют чёткую границу, отсутствуют засвеченные области и тени высокой интенсивности
* Объекты на изображении могут быть только из заранее определенного набора
* Объекты на изображении не должны пересекаться друг с другом
* Объекты на изображении не должны пересекаться с многоугольником
* Объекты и многоугольник должны целиком помещаться на фото, края листов должны быть внутри изображения

### К многоугольнику
* Многоугольник должен быть замкнут
* Многоугольник должен быть выпуклым
* Многоугольник не пересекается с объектами
* Многоугольник должен быть изображен на белом лисет А4
* Границы многоугольника должны задаваться черным цветом, линия границы должны быть различима, шириной не менее 4 мм

### К объектам
* Предметы взяты из обозначенного множества
* Предметы на изображении не повторяются
* Предметы не перекрывают друг друга
* Предметы не пересекаются с листом
* Преметы хорошо различимы с фоном

## Изображения используемых объектов
[Предметы](objects)

## Тестовый датасет
[Датасет](dataset)

* [Все объекты с фотографии помещаются в многоугольник](dataset/all_objects_in)

* [Только каждый объект отдельно может помещатсья в многоугольник](dataset/each_object_in)

* [Только один из объектов может помещаться в многоугольник](dataset/only_one_object_in)

* [Ни один объект не помещается в многоугольник](dataset/none_in)

* [На изображении только один объект, который помещается в многоугольник](dataset/only_one_object)


## План работ

1. Распознование предметов и многоугольников
    1. Наложение фильтров на изображение
    2. Использование детектора Кэнни для определения границ
    3. Составление бинарных масок по границам из предшествующего пункта
    4. Устранение шумов в полученных масках
  
2. Выдление из масок множества предметов и маску многоугольника
    1. Выделение объекта с наибольшей интенсивностью пикселей(т.к. многоугольник белого цвета)
    2. Распознаем остальные объекты по цветам, если не удаётся, то ищем объект по особым точкам
    3. Для распознанных объектов подгружаем подобранные веса
3. Проверка на вхождение предметов и их комбинация в многоугольник
    1. Сортировка по убыванию объектов по площади
    2. Для каждого предмета проходимся с некоторым шагом маской по маске многоугольника.
      На каждом шаге проверяется размещение объекта с разным углом наклона(происходит перебор положений с некоторым шагом в градусах)
      Выполняем логическую операцию "и", если хотя бы для одного предмета получаем кол-во истинных значений меньше, чем площадь маски,
      то объект невозомжно разместить в многоугольнике, программа выдаёт ответ "False"
    3. Повторяем пункт 3.2, только в случае успешного размещения объекта, фиксируем его позицию и переходим к следующему объекту.
        * Если удалось разместить все объекта, программа выводит "True"
        * В случае, если очередной предмет невозможно расположить внутри оставшегося пространства, то запоминаем заполненную площадь
        и переходим к перебору следующей комбинации предметов

---
Автор: Ивакин А.Б., группа 5030102/90401
